import{s as c,e as f,f as l,k as r,o as g}from"./vendor.c8610fdc.js";import{_ as v}from"./index.250e3854.js";const w={setup(){return{captureCanvas({el:e,success:t}){let d=c.dom,{loadJs:a}=c;(async function(){typeof html2canvas=="undefined"&&(console.time("html2canvas v1.0.0-rc.7"),await a("https://unpkg.com/html2canvas@1.0.0-rc.7/dist/html2canvas.min.js"),console.timeEnd("html2canvas v1.0.0-rc.7"));let s=d.position(e);window.scrollTo(s.pageXOffset,s.top);let o=document.createElement("canvas"),n=window.devicePixelRatio||1,m=s.width*n,p=s.height*n,i=2;o.width=m*i,o.height=p*i,o.style.width=m+"px",o.style.height=p+"px",o.getContext("2d").scale(i,i),html2canvas(e,{canvas:o,background:"#FFFFFF",scrollY:0,scrollX:0,width:m,height:p,useCORS:!0}).then(t)})()},createPDF({canvas:e,pdfName:t}){let{loadJs:d}=c;(async function(){console.time("create pdf"),typeof jsPDF=="undefined"&&(console.time("jspdf v1.3.1"),await d("https://unpkg.com/jspdf@1.3.1/dist/jspdf.min.js"),console.timeEnd("jspdf v1.3.1"));let a={width:594.3,height:840.51},s=e.height*(a.width/e.width),o=a.width,n=a.height,m=e.toDataURL("image/jpeg",.83),p=Math.ceil(s/n),i=new jsPDF("","pt","a4");for(let h=1;h<=p;h++){let u=-(h-1)*n;if(n-(h*n-s)<5)return;i.addImage(m,"JPEG",0,u,o,s),h!==p&&i.addPage()}i.save(t+".pdf"),i=e=null,console.timeEnd("create pdf")})()},appendCanvas(){let e=c.dom,t=e.el("#qq");e.position(t),this.captureCanvas({el:t,success:d=>{let a=d.toDataURL("image/jpeg",.83),s=new Image;s.src=a,s.onload=()=>e.append(s,e.el("#qq")),e.on(s,"click",this.imageView)}})},downloadPDF(){let t=c.dom.el("#qq");this.captureCanvas({el:t,success:d=>{this.createPDF({canvas:d,pdfName:c.date.today()})}})},imageView(e){c.showImageView(e.target)}}}},_={class:"u-quill-body"},j={id:"qq"},F=l("h1",null,"\u7F51\u9875\u622A\u56FE",-1),k=l("ol",null,[l("li",null,[l("code",null,"html2canvas.js"),r(" \u7F51\u9875\u8F6C\u6362\u4E3A\u56FE\u7247")]),l("li",null,[l("code",null,"jspdf.js"),r(" \u56FE\u7247\u8F6C\u6362\u4E3Apdf\u6587\u4EF6")])],-1),C=l("hr",null,null,-1),q=l("hr",null,null,-1),x={class:"u-btn__group u-mb u-ml"};function y(e,t,d,a,s,o){return g(),f("div",null,[l("div",_,[l("div",j,[F,k,C,l("img",{onClick:t[0]||(t[0]=(...n)=>a.imageView&&a.imageView(...n)),src:"https://imgs.aixifan.com/jy9Gvt7hIk-iYn2Qf-iyUvai-zMf2ya-qeeeea.jpg"}),q,l("p",{onClick:t[1]||(t[1]=n=>e.$util.toast("123"))},"\u70B9\u51FB\u6D4B\u8BD5\u2193")])]),l("div",x,[l("a",{class:"u-btn",onClick:t[2]||(t[2]=n=>a.appendCanvas())},"\u751F\u6210\u622A\u56FE"),l("a",{class:"u-btn",onClick:t[3]||(t[3]=n=>a.downloadPDF())},"\u4E0B\u8F7DPDF")])])}var b=v(w,[["render",y]]);export{b as default};
